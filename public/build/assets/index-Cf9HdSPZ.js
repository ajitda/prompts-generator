import{r as a,j as e,L as G,z as w,a as B,c as P,u as V,H as Y}from"./app-Cwp10g0-.js";import{i as J}from"./ScriptController-BCaRBIz5.js";import{H as K}from"./Hero-DK-XIpd-.js";import{L as $,i as q}from"./LoadingState-yjayOK_P.js";import{I as X}from"./IdeaCard-DT0WSHLD.js";import{S as D}from"./ScriptView-DAWYTO9p.js";import{S as W}from"./StoryView-CbqdHAE9.js";import{B as I}from"./createLucideIcon-BcYgupJn.js";import{I as M}from"./input-jOelq43f.js";import{S as Q}from"./sparkles-DTAQj5Bs.js";import{A as U}from"./arrow-left-DmOKpllx.js";import{R as Z}from"./rotate-ccw-DBiH2Uh3.js";import{A as ee}from"./app-layout-BscPY5MF.js";/* empty css            */import"./index-CMWG4mbA.js";import"./check-DIhuuomd.js";import"./copy-B1TQ21jN.js";import"./message-square-XGJV9Lx8.js";import"./card-CNOdFIzm.js";import"./refresh-cw-BTifPcJV.js";import"./file-text-DvZTisuc.js";import"./index-BkIHvJOX.js";import"./logo-7M_vJBux.js";import"./index-BqZn0hqr.js";import"./index-BMf5Il-T.js";import"./index-3OyOFFoq.js";const te=({initialGuestCredits:t,isAuthenticated:j,userCredits:p})=>{const c=j?p??0:t??0,[l,y]=a.useState(null);a.useEffect(()=>{(async()=>{try{const S=await(await q.load()).get();y(S.visitorId),document.cookie=`browser_fingerprint=${S.visitorId}; path=/; max-age=31536000`}catch(r){console.error("Error loading FingerprintJS:",r)}})()},[]);const[o,i]=a.useState("input"),[n,u]=a.useState(""),[f,b]=a.useState([]),[d,m]=a.useState(""),[x,k]=a.useState([]),[L,_]=a.useState(""),[F,O]=a.useState("Conversational & Educational"),[C,T]=a.useState(null),[h,g]=a.useState(!1),[R,E]=a.useState(!1),N={"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",...l&&{"X-Browser-Fingerprint":l}},v=async()=>{if(n.trim()){if(c<=0){w.error("You have no generations left.");return}g(!0),E(!0);try{const r=await(await fetch("/scripts/ideas",{method:"POST",headers:N,body:JSON.stringify({keyword:n})})).json();if(!r.success)throw new Error(r.message);b(r.ideas),T(r.script_id),i("ideas"),B.reload({only:["menu_data"]})}catch(s){w.error(s.message)}finally{g(!1)}}},A=async s=>{console.log(s,"idea selected"),m(s),i("story"),g(!0);try{const S=await(await fetch("/scripts/story",{method:"POST",headers:N,body:JSON.stringify({script_id:C,title:s.Title})})).json();if(!S.success)throw new Error;k(S.story)}catch{w.error("Failed to generate story"),i("ideas")}finally{g(!1)}},H=async()=>{g(!0),i("script");try{const r=await(await fetch("/scripts/final",{method:"POST",headers:N,body:JSON.stringify({script_id:C})})).json();if(!r.success)throw new Error;_(r.script),O(r.tone)}catch{w.error("Failed to generate script"),i("story")}finally{g(!1)}},z=()=>{i("input"),u(""),b([]),m(""),k([]),_(""),E(!1)};return e.jsxs("div",{className:"mx-auto w-full max-w-4xl",children:[o==="input"&&!h&&e.jsx("div",{className:"mb-8 rounded-2xl border bg-card p-6 shadow-card",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 md:flex-row md:justify-between",children:[e.jsx(M,{value:n,onChange:s=>u(s.target.value),onKeyDown:s=>s.key==="Enter"&&v(),placeholder:"Enter your topic",className:"h-14"}),e.jsxs(I,{size:"xl",onClick:v,disabled:!n||c<=0||!l,children:[e.jsx(Q,{className:"h-5 w-5"}),"Generate Ideas"]})]})}),!j&&o==="input"&&!h&&e.jsxs("div",{className:"mt-[-20px] mb-8 text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have ",c," free generations left."]}),e.jsxs("p",{className:"mt-1 text-sm font-bold",children:["Please"," ",e.jsx(G,{href:"/login",className:"text-primary hover:underline",children:"Login"}),e.jsx("span",{className:"mx-1 text-muted-foreground",children:"/"}),e.jsx(G,{href:"/register",className:"text-primary hover:underline",children:"Signup"}),e.jsxs("span",{className:"text-muted-foreground",children:[" ","for 10 more credit"]})]})]}),h&&e.jsx($,{message:o==="ideas"?"Generating ideas...":o==="story"?"Crafting your story...":"Writing your script..."}),o==="ideas"&&R&&!h&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-8 text-start",children:e.jsxs("h2",{className:"text-2xl font-black tracking-tight",children:["Your Generated Ideas for"," ",e.jsxs("span",{className:"text-gradient",children:['"',n,'"']})]})}),e.jsx("div",{className:"grid gap-6",children:f.map((s,r)=>e.jsx(X,{idea:s,index:r,onSelect:()=>A(s)},r))}),e.jsxs("div",{className:"mt-12 flex flex-col items-center justify-center gap-4 border-t border-border/10 pt-8 md:flex-row",children:[e.jsxs(I,{variant:"outline",size:"lg",className:"h-14 w-full rounded-2xl border-border/40 px-8 text-[11px] font-black tracking-widest uppercase transition-all hover:bg-muted/50 md:w-auto",onClick:()=>i("input"),children:[e.jsx(U,{className:"mr-3 h-4 w-4"}),"Change Topic"]}),e.jsxs(I,{variant:"default",size:"lg",onClick:v,disabled:c<=0,children:[e.jsx(Z,{className:"mr-3 h-4 w-4"}),"Regenerate Ideas"]})]})]}),o==="story"&&!h&&e.jsx(W,{selectedIdea:d,story:x,onGenerateScript:H,onBack:()=>i("ideas"),onRegenerate:function(){throw new Error("Function not implemented.")},isLoading:!1}),o==="script"&&!h&&e.jsx(D,{selectedIdea:d,script:L,tone:F,onBack:()=>i("story"),onStartOver:z,onRegenerate:function(){throw new Error("Function not implemented.")},isLoading:!1})]})},se=[{title:"Youtube Video Idea Generator",href:J().url}];function Ee(){const t=P.c(11),{props:j}=V(),{filters:p,initialGuestCredits:c,isAuthenticated:l,userCredits:y}=j;let o;t[0]!==p?(o=p===void 0?{}:p,t[0]=p,t[1]=o):o=t[1];const i=o,n=i?.sort,u=i?.direction;let f;t[2]!==n||t[3]!==u?(f={field:n,direction:u},t[2]=n,t[3]=u,t[4]=f):f=t[4];const[b]=a.useState(f);let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsxs(Y,{children:[e.jsx("title",{children:"AI Video Scripts Generator"}),e.jsx("meta",{name:"description",content:"Generate professional YouTube video scripts using AI. Keyword to script in minutes."})]}),t[5]=d):d=t[5];let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx(K,{}),t[6]=m):m=t[6];let x;return t[7]!==c||t[8]!==l||t[9]!==y?(x=e.jsxs(ee,{breadcrumbs:se,children:[d,e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"container mx-auto px-4 py-12 md:py-20",children:[m,e.jsx(te,{initialGuestCredits:c,isAuthenticated:l,userCredits:y})]})})]}),t[7]=c,t[8]=l,t[9]=y,t[10]=x):x=t[10],x}export{Ee as default};
