import{r as a,j as e,L,z as w,a as C,c as P,u as V,H as Y}from"./app-BQq8AACu.js";import{i as J}from"./ScriptController-BCaRBIz5.js";import{H as K}from"./Hero-zHp-oMYn.js";import{L as $,i as q}from"./LoadingState-Cdwg_a8k.js";import{I as X}from"./IdeaCard-B1bAUGqB.js";import{S as D,a as W}from"./StoryView-DkRVSZIO.js";import{B as I}from"./createLucideIcon-CRplOphI.js";import{I as M}from"./input-Dj0e5qIC.js";import{S as Q}from"./sparkles-BiwyloRs.js";import{A as U}from"./arrow-left-CnGKnY0o.js";import{R as Z}from"./rotate-ccw-DAKwllXc.js";import{A as ee}from"./app-layout-xGz25KQO.js";/* empty css            */import"./index-CMWG4mbA.js";import"./check-ZDbMb5at.js";import"./copy-Cq7KZ4iH.js";import"./message-square-5ukJ7nmz.js";import"./card-BZa_qkHb.js";import"./refresh-cw-CQjsXOGq.js";import"./file-text-BetBdcSV.js";import"./dropdown-menu-BxLa9KjQ.js";import"./index-0x3FIngn.js";import"./index-BMf5Il-T.js";import"./index-Cof7w0q5.js";const te=({initialGuestCredits:t,isAuthenticated:S,userCredits:p})=>{const c=S?p??0:t??0,[d,y]=a.useState(null);a.useEffect(()=>{(async()=>{try{const j=await(await q.load()).get();y(j.visitorId),document.cookie=`browser_fingerprint=${j.visitorId}; path=/; max-age=31536000`}catch(r){console.error("Error loading FingerprintJS:",r)}})()},[]);const[i,o]=a.useState("input"),[n,u]=a.useState(""),[f,b]=a.useState([]),[l,m]=a.useState(""),[x,k]=a.useState([]),[F,G]=a.useState(""),[O,T]=a.useState("Conversational & Educational"),[_,R]=a.useState(null),[h,g]=a.useState(!1),[A,E]=a.useState(!1),N={"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",...d&&{"X-Browser-Fingerprint":d}},v=async()=>{if(n.trim()){if(c<=0){w.error("You have no generations left.");return}g(!0),E(!0);try{const r=await(await fetch("/scripts/ideas",{method:"POST",headers:N,body:JSON.stringify({keyword:n})})).json();if(!r.success)throw new Error(r.message);b(r.ideas),R(r.script_id),o("ideas"),C.reload({only:["menu_data","initialGuestCredits","userCredits"]})}catch(s){w.error(s.message)}finally{g(!1)}}},H=async s=>{console.log(s,"idea selected"),m(s),o("story"),g(!0);try{const j=await(await fetch("/scripts/story",{method:"POST",headers:N,body:JSON.stringify({script_id:_,title:s.Title})})).json();if(!j.success)throw new Error;k(j.story),C.reload({only:["initialGuestCredits","userCredits"]})}catch{w.error("Failed to generate story"),o("ideas")}finally{g(!1)}},z=async()=>{g(!0),o("script");try{const r=await(await fetch("/scripts/final",{method:"POST",headers:N,body:JSON.stringify({script_id:_})})).json();if(!r.success)throw new Error;G(r.script),T(r.tone),C.reload({only:["initialGuestCredits","userCredits"]})}catch{w.error("Failed to generate script"),o("story")}finally{g(!1)}},B=()=>{o("input"),u(""),b([]),m(""),k([]),G(""),E(!1)};return e.jsxs("div",{className:"mx-auto w-full max-w-4xl",children:[i==="input"&&!h&&e.jsx("div",{className:"mb-8 rounded-2xl border bg-card p-6 shadow-card",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 md:flex-row md:justify-between",children:[e.jsx(M,{value:n,onChange:s=>u(s.target.value),onKeyDown:s=>s.key==="Enter"&&v(),placeholder:"Enter your topic",className:"h-14"}),e.jsxs(I,{size:"xl",onClick:v,disabled:!n||c<=0||!d,children:[e.jsx(Q,{className:"h-5 w-5"}),"Generate Ideas"]})]})}),!S&&i==="input"&&!h&&e.jsxs("div",{className:"mt-[-20px] mb-8 text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have ",c," free credits left."]}),e.jsxs("p",{className:"mt-1 text-sm font-bold",children:["Please"," ",e.jsx(L,{href:"/login",className:"text-primary hover:underline",children:"Login"}),e.jsx("span",{className:"mx-1 text-muted-foreground",children:"/"}),e.jsx(L,{href:"/register",className:"text-primary hover:underline",children:"Signup"}),e.jsxs("span",{className:"text-muted-foreground",children:[" ","for 10 more credit"]})]})]}),h&&e.jsx($,{message:i==="ideas"?"Generating ideas...":i==="story"?"Crafting your story...":"Writing your script..."}),i==="ideas"&&A&&!h&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-8 text-start",children:e.jsxs("h2",{className:"text-2xl font-black tracking-tight",children:["Your Generated Ideas for"," ",e.jsxs("span",{className:"text-gradient",children:['"',n,'"']})]})}),e.jsx("div",{className:"grid gap-6",children:f.map((s,r)=>e.jsx(X,{idea:s,index:r,onSelect:()=>H(s)},r))}),e.jsxs("div",{className:"mt-12 flex flex-col items-center justify-center gap-4 border-t border-border/10 pt-8 md:flex-row",children:[e.jsxs(I,{variant:"outline",size:"lg",className:"h-14 w-full rounded-2xl border-border/40 px-8 text-[11px] font-black tracking-widest uppercase transition-all hover:bg-muted/50 md:w-auto",onClick:()=>o("input"),children:[e.jsx(U,{className:"mr-3 h-4 w-4"}),"Change Topic"]}),e.jsxs(I,{variant:"default",size:"lg",onClick:v,disabled:c<=0,children:[e.jsx(Z,{className:"mr-3 h-4 w-4"}),"Regenerate Ideas"]})]})]}),i==="story"&&!h&&e.jsx(D,{selectedIdea:l,story:x,onGenerateScript:z,onBack:()=>o("ideas"),onRegenerate:function(){throw new Error("Function not implemented.")},isLoading:!1}),i==="script"&&!h&&e.jsx(W,{selectedIdea:l,script:F,tone:O,onBack:()=>o("story"),onStartOver:B,onRegenerate:function(){throw new Error("Function not implemented.")},isLoading:!1})]})},se=[{title:"Youtube Video Idea Generator",href:J().url}];function ke(){const t=P.c(11),{props:S}=V(),{filters:p,initialGuestCredits:c,isAuthenticated:d,userCredits:y}=S;let i;t[0]!==p?(i=p===void 0?{}:p,t[0]=p,t[1]=i):i=t[1];const o=i,n=o?.sort,u=o?.direction;let f;t[2]!==n||t[3]!==u?(f={field:n,direction:u},t[2]=n,t[3]=u,t[4]=f):f=t[4];const[b]=a.useState(f);let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsxs(Y,{children:[e.jsx("title",{children:"AI Video Scripts Generator"}),e.jsx("meta",{name:"description",content:"Generate professional YouTube video scripts using AI. Keyword to script in minutes."})]}),t[5]=l):l=t[5];let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx(K,{}),t[6]=m):m=t[6];let x;return t[7]!==c||t[8]!==d||t[9]!==y?(x=e.jsxs(ee,{breadcrumbs:se,children:[l,e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"container mx-auto px-4 py-12 md:py-20",children:[m,e.jsx(te,{initialGuestCredits:c,isAuthenticated:d,userCredits:y})]})})]}),t[7]=c,t[8]=d,t[9]=y,t[10]=x):x=t[10],x}export{ke as default};
