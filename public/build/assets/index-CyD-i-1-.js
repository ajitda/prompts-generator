import{r as a,j as e,L as G,z as w,b as B,c as P,a as V,H as Y}from"./app-CN3lGgCV.js";import{i as J}from"./ScriptController-BCaRBIz5.js";import{H as K}from"./Hero-GL0y6Ozd.js";import{L as q,S as $,i as M}from"./StoryView-F5HnTITD.js";import{I as X}from"./IdeaCard-CcutHp1Q.js";import{S as D}from"./ScriptView-YtpeQqwZ.js";import{b as W,B as I}from"./createLucideIcon-eQjJfmRM.js";import{I as Q}from"./input-BWxuy8F6.js";import{S as U}from"./sparkles-BNkBKfsp.js";import{A as Z}from"./arrow-left-4kjoXc62.js";import{A as ee}from"./app-layout-zmBt0cxR.js";/* empty css            */import"./index-CMWG4mbA.js";import"./card-D-DbpzT6.js";import"./refresh-cw-DcvVOeqS.js";import"./file-text-Dokxwnj9.js";import"./check-CYdljBjT.js";import"./copy-BouKLm19.js";import"./index-LQ1J1Avf.js";import"./index-CQja91RY.js";import"./index-BMf5Il-T.js";import"./index-lrO94cZi.js";import"./logo-DK66s85_.js";const te=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],se=W("RotateCcw",te),re=({initialGuestCredits:t,isAuthenticated:j,userCredits:p})=>{const c=j?p??0:t??0,[d,y]=a.useState(null);a.useEffect(()=>{(async()=>{try{const S=await(await M.load()).get();y(S.visitorId),document.cookie=`browser_fingerprint=${S.visitorId}; path=/; max-age=31536000`}catch(r){console.error("Error loading FingerprintJS:",r)}})()},[]);const[o,n]=a.useState("input"),[i,u]=a.useState(""),[f,b]=a.useState([]),[l,m]=a.useState(""),[h,k]=a.useState([]),[L,_]=a.useState(""),[F,O]=a.useState("Conversational & Educational"),[C,T]=a.useState(null),[x,g]=a.useState(!1),[R,E]=a.useState(!1),N={"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",...d&&{"X-Browser-Fingerprint":d}},v=async()=>{if(i.trim()){if(c<=0){w.error("You have no generations left.");return}g(!0),E(!0);try{const r=await(await fetch("/scripts/ideas",{method:"POST",headers:N,body:JSON.stringify({keyword:i})})).json();if(!r.success)throw new Error(r.message);b(r.ideas),T(r.script_id),n("ideas"),B.reload({only:["menu_data"]})}catch(s){w.error(s.message)}finally{g(!1)}}},A=async s=>{console.log(s,"idea selected"),m(s),n("story"),g(!0);try{const S=await(await fetch("/scripts/story",{method:"POST",headers:N,body:JSON.stringify({script_id:C,title:s.Title})})).json();if(!S.success)throw new Error;k(S.story)}catch{w.error("Failed to generate story"),n("ideas")}finally{g(!1)}},H=async()=>{g(!0),n("script");try{const r=await(await fetch("/scripts/final",{method:"POST",headers:N,body:JSON.stringify({script_id:C})})).json();if(!r.success)throw new Error;_(r.script),O(r.tone)}catch{w.error("Failed to generate script"),n("story")}finally{g(!1)}},z=()=>{n("input"),u(""),b([]),m(""),k([]),_(""),E(!1)};return e.jsxs("div",{className:"mx-auto w-full max-w-4xl",children:[o==="input"&&!x&&e.jsx("div",{className:"mb-8 rounded-2xl border bg-card p-6 shadow-card",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 md:flex-row md:justify-between",children:[e.jsx(Q,{value:i,onChange:s=>u(s.target.value),onKeyDown:s=>s.key==="Enter"&&v(),placeholder:"Enter your topic",className:"h-14"}),e.jsxs(I,{size:"xl",onClick:v,disabled:!i||c<=0||!d,children:[e.jsx(U,{className:"h-5 w-5"}),"Generate Ideas"]})]})}),!j&&o==="input"&&!x&&e.jsxs("div",{className:"mt-[-20px] mb-8 text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have ",c," free generations left."]}),e.jsxs("p",{className:"mt-1 text-sm font-bold",children:["Please"," ",e.jsx(G,{href:"/login",className:"text-primary hover:underline",children:"Login"}),e.jsx("span",{className:"mx-1 text-muted-foreground",children:"/"}),e.jsx(G,{href:"/register",className:"text-primary hover:underline",children:"Signup"}),e.jsxs("span",{className:"text-muted-foreground",children:[" ","for 10 more credit"]})]})]}),x&&e.jsx(q,{message:o==="ideas"?"Generating ideas...":o==="story"?"Crafting your story...":"Writing your script..."}),o==="ideas"&&R&&!x&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-8 text-start",children:e.jsxs("h2",{className:"text-2xl font-black tracking-tight",children:["Your Generated Ideas for"," ",e.jsxs("span",{className:"text-gradient",children:['"',i,'"']})]})}),e.jsx("div",{className:"grid gap-6",children:f.map((s,r)=>e.jsx(X,{idea:s,index:r,onSelect:()=>A(s)},r))}),e.jsxs("div",{className:"mt-12 flex flex-col items-center justify-center gap-4 border-t border-border/10 pt-8 md:flex-row",children:[e.jsxs(I,{variant:"outline",size:"lg",className:"h-14 w-full rounded-2xl border-border/40 px-8 text-[11px] font-black tracking-widest uppercase transition-all hover:bg-muted/50 md:w-auto",onClick:()=>n("input"),children:[e.jsx(Z,{className:"mr-3 h-4 w-4"}),"Change Topic"]}),e.jsxs(I,{variant:"default",size:"lg",onClick:v,disabled:c<=0,children:[e.jsx(se,{className:"mr-3 h-4 w-4"}),"Regenerate Ideas"]})]})]}),o==="story"&&!x&&e.jsx($,{selectedIdea:l,story:h,onGenerateScript:H,onBack:()=>n("ideas"),onRegenerate:function(){throw new Error("Function not implemented.")},isLoading:!1}),o==="script"&&!x&&e.jsx(D,{selectedIdea:l,script:L,tone:F,onBack:()=>n("story"),onStartOver:z,onRegenerate:function(){throw new Error("Function not implemented.")},isLoading:!1})]})},ae=[{title:"Youtube Video Idea Generator",href:J().url}];function Ce(){const t=P.c(11),{props:j}=V(),{filters:p,initialGuestCredits:c,isAuthenticated:d,userCredits:y}=j;let o;t[0]!==p?(o=p===void 0?{}:p,t[0]=p,t[1]=o):o=t[1];const n=o,i=n?.sort,u=n?.direction;let f;t[2]!==i||t[3]!==u?(f={field:i,direction:u},t[2]=i,t[3]=u,t[4]=f):f=t[4];const[b]=a.useState(f);let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsxs(Y,{children:[e.jsx("title",{children:"AI Video Scripts Generator"}),e.jsx("meta",{name:"description",content:"Generate professional YouTube video scripts using AI. Keyword to script in minutes."})]}),t[5]=l):l=t[5];let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx(K,{}),t[6]=m):m=t[6];let h;return t[7]!==c||t[8]!==d||t[9]!==y?(h=e.jsxs(ee,{breadcrumbs:ae,children:[l,e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"container mx-auto px-4 py-12 md:py-20",children:[m,e.jsx(re,{initialGuestCredits:c,isAuthenticated:d,userCredits:y})]})})]}),t[7]=c,t[8]=d,t[9]=y,t[10]=h):h=t[10],h}export{Ce as default};
